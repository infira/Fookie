<?php
require_once 'vendor/autoload.php';

use Symfony\Component\Console\Application;

define("IS_TEST", true);

$config  = ["errorLevel"           => -1,//-1 means all erors, see https://www.php.net/manual/en/function.error-reporting.php
            "env"                  => "dev", //dev,stable (stable env does not display full errors erros
            "email"                => ($environment == "live") ? $Mailer : false, //or you can provide simply email address, then default PHPMailer instance is used
            "debugBacktraceOption" => DEBUG_BACKTRACE_IGNORE_ARGS];
$Handler = new Infira\Error\Handler($config);

try
{
	$app = new Application();
	require_once __DIR__ . '/smurfAdd.php';
	$app->setCatchExceptions(false);
	$app->run(new Symfony\Component\Console\Input\StringInput($_GET['command']));
}
catch (\Infira\Error\Error $e)
{
	echo $e->getHTMLTable();
}
catch (Throwable $e)
{
	echo $Handler->catch($e)->getHTMLTable();
}
?>


